---
layout: post
title: 운영체제_ 인터럽트 (interrupt)
category: CS
tags: [운영체제, 프로세스, 인터럽트]
comments: true
---
>이 글은 공부 중에 작성하는 글입니다.            
>정정이 필요한 내용은 댓글로 알려주시면 감사하겠습니다 :)

<br>

안녕하세요 오동나무입니다.  <br>

운영체제 프로세스에 이어서 인터럽트에 대한 포스팅입니다. [(유튜브)최희준교수의-컴퓨터일반](https://www.youtube.com/watch?v=fjQnmiwJFl0)에서 이해한 내용을 토대로 작성합니다. 아마 어떤 참고서를 바탕으로한 강의의 필기를 받아 쓴거라 말이 조금 딱딱해 보일 수 있습니다! 강의를 직접 보고 오시면 이해가 훨씬 빠르답니다 :)

<br>
<br>

# 1. 인터럽트 정의
* 컴퓨터 작동 중에 예기치 않은 문제가 발생한 경우라도 업무 처리가 계속될 수 있도록 하는 컴퓨터 운영체계의 한 기능
* 프로세스가 수행 중에 다른 프로세스를 수행하기 위하여 현재 수행 중인 프로세스를 중단하거나 외부 입력장치에 의해 프로세스가 중단되는 상태
* **사용자에 의해 새로운 프로그램이 실행 될 때, 현재 실행 중인 프로세스 상태를 잠시 중단하고, 새로운 프로그램을 실행시키는 과정. 잠시 중단한 프로세스의 상태는 다시 실행을  시작하기 위해 중단된 시점의 정보를 잠시 저장한다.**
* 인터럽트는 입출력 연산, 하드웨어 실패, 프로그램 오류 등에 의해서 발생한다.
* 인터럽트가 발생한 경우, 진행중인 프로그램 재개에 필요한 레지스터 문맥을 저장한다.
* 인터럽트는 크게 **하드웨어 인터럽트**와 **소프트웨어 인터럽트**로 분류할 수 있다. 일반적으로 인터럽트는 하드웨어 인터럽트를 가리키는 경우가 많고 후자를 SWI(SoftWare Interrupt)라고 구별하기도 한다. 하드웨어 인터럽트는 CPU 외부의 디스크 컨트롤러나 주변장치로부터 요구되는 것으로, 운영체제의 처리를 요하는 상황을 알리기 위해 전기적인 신호를 사용해 구현된다.

>인터럽트가 발생하면 ‘저장’한다는 개념이 중요!

<br>

# 2. 인터럽트의 목적
- **CPU 자원의 효율적 이용**           
주변 장치의 속도가 CPU 속도보다 훨씬 느리기 때문에 주변 장치가 처리를 수행하는 동안 CPU는 다른 작업을 수행하고, 처리 종료 후 이를 알리기 위해 사용된다. 프로그래밍 방식에는 인터럽트 방식과 폴링(polling) 방식이 있는데 정기적으로 CPU 상태를 확인하는 폴링 방법을 사용하게 되면 폴링을 위해 다른 처리의 효율이 떨어진다. 따라서 인터럽트 방식을 사용할 경우 처리 종료 인터럽트를 받을 때까지 CPU는 다른 작업에 집중할 수 있다.
- **응답성 향상**         
키보드, 마우스 등의 사용자 인터페이스는 입력 지연 혹은 누설 없이 이를 안정적으로 처리해야 한다.
- **예외 처리의 효율화**           
 주변 장치에 이상이 발생한 경우 인터럽트를 이용하여 장애를 신속하게 전달할 수 있게 한다.
- **정확한 타이밍 제어**              
 이미지 표시, 음악 연주 및 시계 등의 타이밍 처리를 위해 기기가 탑재하는 타이머에 의한 인터럽트를 이용해 CPU 타이밍을 제어한다.

<br>

# 3. 인터럽트의 처리를 위한 작업 순서
1. 인터럽트가 발생하면 운영체제가 제어권을 받는다.
2. 운영체제는 인터럽트 받은 현재의 프로세스 상태를 저장한다.
3. 운영체제는 인터럽트의 발생 원인을 찾아 지정되어 있는 루틴으로 제어권을 넘겨준다.
4. 인터럽트 처리 루틴이 인터럽트를 처리한다.
5. 인터럽트가 걸렸던 이전 프로세스의 상태로 복구된다.
6. 인터럽트가 걸렸던 시점 이후부터 프로세스가 실행된다.

<br>

# 4. 인터럽트의 종류
* **SVC(SuperVisor Call) 인터럽트**
    * 프로세스 관리 호출, 기억장치 할당 루틴 호출, 입출력 수행 루틴 호출 시에 발생하는 인터럽트로 사용자가 새로운 프로그램을 실행할 때 발생한다.
    * 새로운 프로그램을 실행하는 것은 사용자와 운영체제 정보 교환을 하므로 오퍼레이터와의 대화 시에 발생하는 인터럽트라고도 한다.
* **입출력(I/O) 인터럽트**
    * 하드웨어적 인터럽트로 프린트나 디스크 저장 시에 입출력 채널 확인, 준비, 할당, 완료 시에 발생한다.
* **외부(Extern) 인터럽트**
    * 여러 개의 프로세스가 운영되는 다중 프로그래밍 기법에서 임의의 프로세스는  CPU를 사용하기 위한 일정한 시간 간격이 있는데 이를 시간할당량이라고 한다.
    * 임의의 프로세스는 운영체제에 의해서 시간할당량이 확인되며, 운영체제가 관리하는 인터럽트 시계에 의해서 해당 프로세스가 종료된다. 이때 발생하는 인터럽트가 외부 인터럽트이다.
* **재시작(Restart) 인터럽트**
    * 사용자가 `Ctrl + Alt + Del` 키를 입력하거나 Reset 버튼을 이용하여 시스템을 재부팅하는 경우 발생한다.
* **프로그램 검사(Program Check) 인터럽트**
    * 실행 중인 프로그램에서 오버플로우(Overflow)나 언더플로우(Underflow)일 경우나 분모가 0인 나눗셈을 처리하는 경우 발생한다.
* **기계  검사(Machine Check)  인터럽트**
    * 컴퓨터 시스템 고장으로 발생, 기계 고장

<br>

# 5. 인터럽트의 특징
* 컴퓨터 시스템에 비상사태가 발생할 때 그 처리를 위해서 인터럽트가 필요하다.
* 하드웨어의 기능에 의하여 프로그램의 착오는 정해진 인터럽트 처리 루틴에 의해 복구되어야 한다.
* 컴퓨터가 정상적인 업무를 수행하는 도중에 발생하는 예기치 않은 일들에 대하여 컴퓨터의 작동이 중단없이 계속적으로 업무를 수행할 수 있도록 하는 기능
* 인터럽트가 발생되면 CPU는 현재 실행중인 명령을 마친 후  CPU의 상태를 보관한다.
* 연산오류가 발생할 경우에 인터럽트가 발생한다.
* 메모리 보호 구역에 접근을 시도하는 경우에 인터럽트가 발생한다.
* 입출력이 완료되었을 때 인터럽트가 발생한다.
* 인터럽트 요구를 처리하는 서비스 프로그램의 시작 주소는 다음 수행할 명령어의  번지를 기억하고 있는 레지스터인 프로그램 계수기(PC: Program Counter, 명령어 계수기)에 기억시킨다.
            (* PC: CPU 내에서, 다음에 수행할 명령의 위치를  가지고 있음.)

* 인터럽트 처리는 스택을 사용한다.

<br>

# 6. 인터럽트 동기
* **동기 인터럽트**(연속적)
    * 명령어 실행 중 CPU에 의해 처리되는 인터럽트로 하나의 명령어가 종료 후 인터럽트 발생한다.
    * 프로세스가 실행 중에 0으로 나누기를 할 때 발생하는 인터럽트, 프로세스 내 명령어 실행 때문에 발생하는 인터럽트, 프로세스 내 명령어가 보호 메모리 영역을 참조할 때 발생하는 인터럽트 등을 말한다.
* **비동기 인터럽트**(일시적, 순간적)
    * 다른 하드웨어 장치가 CPU 클럭 시그널(CPU가 움직이는 순서)와 상관없이 생성하는 인터럽트
    * 키보드 혹은 마우스를 사용할 때 발생하는 것과 같은 인터럽트를 말한다.

<br>

# 7. 트랩
* 프로세스가 특정 시스템 기능을 사용하려고 할 때 그 기능을 운영체제에게 요청하는 방법을 트랩이라고 한다.
* 인터럽트 중에 소프트웨어적 인터럽트를 트랩이라고 할 수 있다.
* 인터럽트나 트랩이 발생하면 프로그램 카운터(PC)를 정해진 특정 번지로 변경하여 정해진 처리 루틴을 수행하게 된다.

* 트랩은 실행중인 프로그램 내에 특별한 조건을 걸어 놓는 것을 말한다.
* ‘인터럽트를 트랩 한다.’고 하면 특정한 인터럽트가 발생할 때까지 기다렸다가 해당하는 루틴을 실행시키는 것을 말한다.
* 에러 트랩은 복원 루틴을 제공하기 위한 것이고, 디버깅 트랩은 특정 명령의 실행을 기다렸다가 현재 프로그램을 중지시키고, 현재 상태를 분석하는 것이다.
* 트랩이 발생하는 조건은 0에 의한 나눗셈, Overflow 또는 Underflow 시, 보호 영역 내에 있는 기억장치 주소를 접근하는 경우이다.







<br>
<br>

#### 참고
- [https://www.youtube.com/watch?v=fjQnmiwJFl0](https://www.youtube.com/watch?v=fjQnmiwJFl0)
- [https://terms.naver.com/entry.nhn?docId=1232195&cid=40942&categoryId=32837](https://terms.naver.com/entry.nhn?docId=1232195&cid=40942&categoryId=32837)

<br>
<br>
