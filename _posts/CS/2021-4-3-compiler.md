---
layout: post
title: 컴파일러(Compiler) 간단하게 알아보자
category: CS
tags: [Compiler, Linker, Symbol]
comments: true
---
>이 글은 공부 중에 작성하는 글입니다.      
>정정이 필요한 내용은 댓글로 알려주시면 감사하겠습니다 :)

<br>

안녕하세요 오동나무입니다.  <br>

프로젝트에 추가해준 프레임워크가 import되지 않는 문제를 겪으면서 컴파일러, linker, symbol 등에 대해서 찾아보게 되었습니다. 컴파일러에 대해서는 이전에 lldb에 대해 공부할 때 잠깐 봤던 기억이 있습니다. 이 내용들과 추가적인 내용들을 바탕으로 간단하게 컴파일러, 링커, 심볼에 대해 알아보도록 하겠습니다.

<br>
<br>

# Compile
먼저 Compile이 무엇인지 알아봅시다. 컴파일은 무엇일까요?
<br>

## ✐ Compile
**컴파일(Compile)** 은 프로그래밍 언어를 Runtime 이전에 **기계어로** 해석하는 작업 방식을 말합니다. Xcode에서 입력한 코드를 Build 혹은 Run 하면 기계가 읽을 수 있도록 바꾸어 주는 것이지요. 더 쉽게 이야기하면 영어로된 발표문을 발표하기 전에 통으로 한국어 번역본으로 번역해주는 작업인 것입니다. <br>

그러면 컴파일러는 컴파일을 해주는 프로그램입니다. **프로그램을 만드는 프로그램** 이라고 표현할 수도 있겠네요. <br>

![image](https://user-images.githubusercontent.com/73867548/113566945-9e257a00-9648-11eb-868b-f05a7d253037.jpeg)


이때 원래의 소스를 **원시 코드(Source Code)**, 바뀐 코드를 **목적 코드(Object Code)** 라고 합니다. 원시 코드는 고급 언어, 목적 코드는 저급 언어(기계어)에 가깝습니다. 컴파일의 특징은 아래와 같습니다. <br> 

- 컴파일을 하게 되면 런타임 이전에 Assembly 언어로 변환하기 때문에 **구동 시간이 오래 걸리지만**,
- 구동된 이후는 하나의 패키지로 **매우 빠르게 동작**합니다.
- 그리고 코드와 함께 시스템으로부터 메모리를 할당받으며 할당받은 메모리를 사용하게 됩니다.
- 런타임 이전에  이미 해석을 마치고 대게 컴파일 결과물이 바로 기계어로 전환되기 때문에  OS 및 빌드 환경에 종속적이다. 그러므로  OS  환경에 맞게  호환되는  라이브러리와 빌드환경을 구분해서 구축해줘야 합니다.
- Compile 언어의 대표로는 C, C++ 등이 있습니다.

<br>

> #### ✐ Interpret (인터프릿)
> **Interpret** 은 런타임 이전에 기계어로 프로그래밍 언어를 변환하는 컴파일 방식과 다르게, 런타임 이후에 Row 단위로 해석하여 프로그램을 구동시키는 방식입니다. 쉽게 말하면 실시간 통역과 같은 맥락이라고 할 수 있습니다.
> - 프로그래밍 언어를 기계어로 바로 바꾸지않고 중간 단계를 거친 뒤, 런타임에 즉시 해석하기 때문에 바로 컴팩트한 Binary 파일을 뽑아낼 수 있는 Compile 방식에 비해 낮은 퍼포먼스를 보이게 됩니다.
> - 런타임에 직접 코드를 구동시키는 특징이 있기 때문에 실제 실행시간은 느리며, 대신 런타임에 실시간 Debugging 및 코드 수정이 가능합니다. (즉각적인 수정 및 반영 가능)
> - 또한 메모리를 별도로 할당받아 수행되지 않으며, 필요할 때마다 할당하여 사용합니다.
> - 대표적인 Interpreter 언어로 Javascript와 같은 스크립팅 언어들이 있습니다.


<br>

## ✐ Linker
![image](https://user-images.githubusercontent.com/73867548/113671980-08dec000-96f2-11eb-9a64-59816f8142b1.jpeg)

컴파일 과정을 거치면 보통 소소 파일 하나당 오브젝트 파일이 하나 만들어지게 됩니다. 이렇게 생긴 여러개의 오브젝트 파일을 엮어서 실행 파일을 만들어 주는 것이 Linker입니다. 언어마다 스타일이 다르긴 한데, Linker 까지 묶어서 컴파일러라고 하기도 합니다. <br>

링커는 오브젝트 코드들 외에도 라이브러리 코드와 착수 코드(start-up code)를 함께 엮어줍니다. <br>

#### - Library Code
실제로 코드를 작성할 때 직접 작성한 코드도 있지만 모든 기능을 직접 다 구현할 수는 없기 때문에 라이브러리에서 가져다 쓰는 코드들도 있습니다. 이러한 코드들을 라이브러리 코드라고 하며 링커는 컴파일된 오브젝트 코드와 라이브러리 코드를 함께 엮어줍니다.

#### - Start-up Code
착수 코드라고도 합니다. 프로그램들은 공통적으로 실행되자마자 해야하는 일들이 있습니다. 대표적으로는 메모리 할당 등입니다. Start-up Code는 부팅 과정 중 첫 번째로 실행되는 코드를 말합니다.

<br>

## ✐ Symbol
심볼은 object file(오브젝트 코드)에서 쓰이는 함수의 이름, 변수의 이름 등등을 의미합니다. <br>

링커의 역할 중 하나가 심볼을 해결하는 것인데, 심볼을 해결한다는 것은 여러개의 오브젝트 파일에 같은 이름의 함수 또는 변수가 정의되어 있을 때 어떤 함수의 것을 사용해야 하는가를 결정하는 것을 말합니다. <br>

예를 들어 컴파일 결과 A와 B라는 오브젝트 파일이 만들어졌을 때, A와 B의 심볼테이블에 같은 이름의 함수가 있다면 어떤 파일의 함수를 매칭시킬 것인가를 결정하는 것입니다.

<br>

------

<br>

컴파일러를 한 마디로  표현하면 **프로그램을 만드는 프로그램** 이라고 할 수 있겠네요!     
추가적으로 위키피디아를 읽어보는 것도 좋을 것 같습니다.
[위키피디아-컴파일러](https://ko.wikipedia.org/wiki/컴파일러)











<br>
<br>

#### 참고
- [https://www.youtube.com/watch?v=ZnoU_MPKMMA](https://www.youtube.com/watch?v=ZnoU_MPKMMA)
- [https://www.youtube.com/watch?v=ywMcjNBneIM](https://www.youtube.com/watch?v=ywMcjNBneIM)
- [https://simsimjae.tistory.com/235](https://simsimjae.tistory.com/235)


<br>
<br>
